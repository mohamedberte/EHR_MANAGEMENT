<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../part/head'); %>
</head>
<body class="container">

<header>
  <%- include('../part/header-logged'); %>
</header>

<main class="main">
    <div class="container">
      <p>You are connected as : <b>
      <% if (user) { %>
        <%= user %>
      <% } %>
      </b>
    </p>
        <div class="row">
          
          <div class="col">
                      <div class="title-schema">
                        <h5> Incoming Request </h5>
                        <button type="button" id='create-schema' class="button-schema-title"> New request </button>
                        <button type="button" id='refresh-request'class="button-schema-title"> Refresh </button>
                      </div>
                      <div id="table-wrapper">
                        <div id="table-scroll">
                        <table id="request-table" class="table table-striped table-bordered table-sm" cellspacing="0"
                        width="50%">
                        <thead>
                          <tr>
                            <th class="th-sm">From
                            </th>
                            <th class="th-sm">Request
                            </th>
                            <th class="th-sm">Status
                            </th>
                            <th class="th-sm">Actions
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          
                        </tbody>
                        </table>
                        </div>
                      </div>
                      
            </div>

          <div class="col">
            <div class="title-wallet">
              <h5> Wallet Information </h5>
              <p>Handler : <i id="wallet_handler"><% if (wallet) { %>
                <%= wallet['wallet'] %>
              <% } %> 
              </i>
            </p>

              <p>DID : <i id="info_did"><% if (wallet) { %>
                <%= wallet['did'] %>
              <% } %> </i></p>

              <p>Cl√© public : <i id= "info_verkey"><% if (wallet) { %>
                <%= wallet['verkey'] %>
              <% } %> </i></p>

              <p>PoolHandler : <i id= "info_pool"><% if (wallet) { %>
                <%= wallet['poolhandler'] %>
              <% } %> </i></p>
              
            </div>
          </div>


          <div class="w-100"></div>

          <div class="col">
            <div class="title-schema">
              <h5> My wallet </h5>
              <button type="button" id='refresh-wallet'class="button-schema-title"> Refresh </button>
            </div>
            <div id="table-wrapper">
              <div id="table-scroll">
              <table id="wallet-table" class="table table-striped table-bordered table-sm" cellspacing="0"
              width="100%">
              <thead>
                <tr>
                  <th class="th-sm">Id
                  </th>
                  <th class="th-sm">Attributs
                  </th>
                  <th class="th-sm">Schema ID
                  </th>

                  <th class="th-sm">Credential Definition ID
                  </th>

                  <th class="th-sm">Actions
                  </th>
                </tr>
              </thead>
              <tbody>
                
              </tbody>
              </table>
              </div>
            </div>
          </div>
        </div>
      </div>

        
    <!-- The Modal -->
    <div id="create_schema_form" class="modal">

      <!-- Modal content -->
      <div class="modal-content">
        <span class="close">&times;</span>
        <h5> New request </h5>
        <form id="schema-form">
          <label for="did_label">Issuer adress :</label><br>
          <input type="text" id="r_endpoint" name="r_endpoint"><br>

          <label for="did_label">Did:</label><br>

          <input type="text" id="r_did" name="r_did" value="<% if (wallet) { %><%= wallet['did'] %><% }%>" disabled><br>

          <label for="verkey_label">Public key :</label><br>

          <input type="text" id="r_verkey" name="r_verkey" value="<%if (wallet) { %><%= wallet['verkey'] %><% } %>" disabled>
          <button id="r_gen" type="button"> Generate </button><br>

          <label for="at_label">Number of attribut requested (1~100) :</label><br>
          <input type="number" min="1" max="100" oninput="addInput()" id="at_number" name="at_number"><br>
          <label for="val_label">Input :</label><br>
          <div id="attr_box">


          </div><br>

          <button id="r_send" type="button"> Send request </button>
        </form>
      </div>

    </div>



    <div id="endpoint_form" class="modal">

      <!-- Modal content -->
      <div class="modal-content">
        <span class="close">&times;</span>
        <h5> Send to </h5>
        <form id="schema-form">
          <label for="did_label">Issuer endpoint :</label><br>
          <input type="text" id="r_endpoint" name="r_endpoint"><br>

          <label for="did_label">Did:</label><br>

          <input type="text" id="r_did" name="r_did" value="<% if (wallet) { %><%= wallet['did'] %><% }%>" disabled><br>

          <label for="verkey_label">Public key :</label><br>

          <input type="text" id="r_verkey" name="r_verkey" value="<%if (wallet) { %><%= wallet['verkey'] %><% } %>" disabled>
          <button id="r_gen" type="button"> Generate </button><br>

          <label for="at_label">Number of attribut requested (1~100) :</label><br>
          <input type="number" min="1" max="100" oninput="addInput()" id="at_number" name="at_number"><br>
          <label for="val_label">Input attribut :</label><br>
          <div id="attr_box">


          </div><br>

          <button id="r_send" type="button"> Send request </button>
        </form>
      </div>

    </div>

</main>

<footer>
  <%- include('../part/footer'); %>
</footer>